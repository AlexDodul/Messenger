<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
        <meta charset="UTF-8" />
        <title>Form auth</title>
        <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/auth/style" />

    </head>
    <body>
        <div class="container">
            <section>				
                <div id="container" >
                    <div id="wrapper">
                        <div id="login" class="animate form">
                            <form>
                                <h1>LogIn</h1> 
                                <p> 
                                    <label for="username" class="uname"> Your email or login </label>
                                    <input id="username" name="username" required="required" type="text" placeholder="Your login or my_email@gmail.com"/>
                                </p>
                                <p> 
                                    <label for="password" class="youpasswd"> Your password </label>
                                    <input id="password" name="password" required="required" type="password" placeholder="For example X8df!90EO" /> 
                                </p>
                                <p class="keeplogin"> 
									<input type="checkbox" name="loginkeeping" id="loginkeeping" value="loginkeeping" /> 
									<label for="loginkeeping">Remember me</label>
								</p>
                                <p class="login button"> 
                                    <button type="button" onclick="ClickOn()" value="Sign In" />
								</p>
                                <p class="change_link">
									Not with us yet?
									<a href="/reg" class="to_register">Register now</a>
								</p>
                            </form>
                        </div>
                    </div>
                </div>  
            </section>
        </div>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
          function ClickOn() {
              const username = document.getElementById('username').value;
              const password = document.getElementById('password').value;
              let data = {
                  login: username,
                  password: password
              };
              axios.post('http://localhost:8000/auth',
                  data
              )
                  .then(response => {

                      console.log(response);
                      if(response.status >= 200 && response.status < 300){
                          window.location.replace("http://localhost:8000/reg");
                      } else {

                      }

                      //alert('response');
                      /*if (response.status >= 200 && response.status < 300) {
                          let token = response.data;
                          axios(
                              {
                                  method: 'GET',
                                  url: 'http://localhost:8000/chat',
                                  headers: {
                                      'Content-type' : 'application/json'
                                  },
                                  data: token
                              }
                          );
                      }*/
                  })
                  .catch(function (error) {
                      console.log(error);
                  });
          }
        </script>
    </body>
</html>